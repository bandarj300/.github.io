---
title: "GV300 Showcase"
description: |
  A showcase of my best code and visualisation from GV300 — analysing UK constituency-level election data.
author:
  - name: "Bandar J"
date: 2026-01-26
output:
  distill::distill_article:
    toc: true
    toc_depth: 3
    code_folding: true
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, message = FALSE, warning = FALSE)
```

## Introduction

This page showcases work from my GV300 Assignment 2, which explored UK general election data at the constituency level. The analysis asked two big questions: **are all votes equal?** and **who isn't voting?** I used R with tidyverse and ggplot2 to clean real parliamentary data, compute summary statistics, and produce visualisations that reveal inequality in constituency sizes and turnout patterns across the four UK nations.

## Data Preparation

The dataset comes directly from the UK Parliament's election results API. It contains candidate-level records from the 2024 general election. The code below loads the raw CSV, cleans column names, removes by-elections, aggregates to constituency level, and computes turnout as a percentage of the registered electorate.

```{r data-prep}
library(tidyverse)
library(ggplot2)
library(patchwork)
library(readr)
library(stringr)

# Load raw data from Parliament API
uk_csv <- "https://electionresults.parliament.uk/general-elections/6/candidacies.csv"
uk_raw <- readr::read_csv(uk_csv, show_col_types = FALSE)

# Clean column names
names(uk_raw) <- names(uk_raw) %>%
  tolower() %>%
  str_replace_all("\\s+", "_")

# 1) Drop by-elections
uk1 <- uk_raw %>%
  filter(!`election_is_by-election`)

# 2) Keep key variables and rename
uk2 <- uk1 %>%
  select(
    constituency = constituency_name,
    country      = country_name,
    valid_votes  = candidate_vote_count,
    electorate   = electorate
  )

# 3) Aggregate from candidate-level to constituency-level
uk3 <- uk2 %>%
  group_by(country, constituency) %>%
  summarise(
    valid_votes = sum(valid_votes, na.rm = TRUE),
    electorate  = max(electorate, na.rm = TRUE),
    .groups = "drop"
  )

# 4) Compute turnout and drop bad rows
uk <- uk3 %>%
  mutate(turnout_registered = 100 * valid_votes / electorate) %>%
  filter(is.finite(turnout_registered), electorate > 0)

glimpse(uk)
```

These four steps remove by-elections and keep only general election contests, select and rename the key columns, collapse multiple candidate rows per constituency into one row, and calculate turnout as a percentage of the electorate while removing any invalid rows.

## Part 1: Are All Votes Equal?

### Smallest and Largest Constituencies

The first question is whether constituency sizes vary enough to give some voters more influence than others. I identified the five smallest and five largest constituencies by valid votes cast.

```{r smallest-largest}
# 5 smallest constituencies by valid votes
smallest <- uk %>%
  arrange(valid_votes) %>%
  slice_head(n = 5) %>%
  select(constituency, country, valid_votes, turnout_registered)
smallest

# 5 largest constituencies by valid votes
largest <- uk %>%
  arrange(desc(valid_votes)) %>%
  slice_head(n = 5) %>%
  select(constituency, country, valid_votes, turnout_registered)
largest

# Ratio of largest to smallest
biggest_value  <- max(uk$valid_votes, na.rm = TRUE)
smallest_value <- min(uk$valid_votes, na.rm = TRUE)
ratio <- biggest_value / smallest_value
ratio
```

The ratio is a bit above four, meaning the largest constituency has roughly four times as many valid voters as the smallest. From a strict one-person-one-vote perspective, this is not fully fair — a vote in a small seat carries more weight per MP than in a much larger one.

### Visualising Size Differences

To see these differences more clearly, I first plotted histograms of constituency size by country, then improved the comparison with boxplots.

```{r histogram, fig.width=10, fig.height=7}
overall_mean <- mean(uk$valid_votes, na.rm = TRUE)

ggplot(uk, aes(x = valid_votes)) +
  geom_histogram(bins = 30, fill = "steelblue", alpha = 0.7) +
  geom_vline(xintercept = overall_mean,
             color = "red", linetype = "dashed", linewidth = 1) +
  facet_wrap(~ country, ncol = 2) +
  labs(
    title = "Distribution of Constituency Sizes by Country",
    subtitle = "Red dashed line = overall UK mean",
    x = "Valid votes per constituency",
    y = "Number of constituencies"
  ) +
  theme_minimal()
```

The histogram is hard to compare across countries because England has many more constituencies than the others, so its panel dominates visually. The boxplot below solves this problem.

```{r boxplot, fig.width=9, fig.height=6}
ggplot(uk, aes(x = country, y = valid_votes)) +
  geom_boxplot(fill = "steelblue", alpha = 0.7, outlier.alpha = 0.6) +
  labs(
    title = "Constituency Size (Valid Votes) by Country",
    subtitle = "Boxplots show median, spread, and outliers",
    x = "Country",
    y = "Valid votes"
  ) +
  theme_minimal()
```

The country with the narrowest box and shortest whiskers has the most equal constituency sizes, while the one with the widest box and more outliers has more inequality. Likely predictors of constituency size include population density (or an urban/rural indicator) and country or region, since boundary decisions differ across nations.

### Summary Statistics by Country

```{r summary-stats}
size_summary <- uk %>%
  group_by(country) %>%
  summarise(
    mean_votes       = mean(valid_votes),
    median_votes     = median(valid_votes),
    sd_votes         = sd(valid_votes),
    n_constituencies = n(),
    .groups = "drop"
  ) %>%
  arrange(desc(mean_votes))
size_summary
```

The median and standard deviation are the most useful statistics here. The median shows the typical seat size, while the standard deviation captures how much spread there is. Voters in very small constituencies have more voter power because each MP represents fewer people.

## Part 2: Who Isn't Voting?

### Counting Non-Voters

```{r non-voters}
non_voter_analysis <- uk %>%
  mutate(non_voters = electorate - valid_votes)

total_non_voters     <- sum(non_voter_analysis$non_voters, na.rm = TRUE)
total_electorate     <- sum(non_voter_analysis$electorate, na.rm = TRUE)
non_voter_percentage <- 100 * total_non_voters / total_electorate

total_non_voters
non_voter_percentage

top_non_voters <- non_voter_analysis %>%
  arrange(desc(non_voters)) %>%
  slice_head(n = 10) %>%
  select(constituency, country, electorate, valid_votes,
         non_voters, turnout_registered)
top_non_voters
```

Large numbers of non-voters are concentrated in big constituencies with lower turnout, often in urban areas. This matters because those people are absent from the final result even though they are formally part of the electorate.

### Turnout Categories

I grouped constituencies into turnout bands to see patterns across the four nations.

```{r turnout-categories, fig.width=10, fig.height=6}
turnout_categories <- uk %>%
  mutate(
    category = case_when(
      turnout_registered < 55 ~ "Low",
      turnout_registered < 65 ~ "Medium",
      turnout_registered < 75 ~ "High",
      TRUE ~ "Very High"
    ),
    category = factor(category,
                      levels = c("Low", "Medium", "High", "Very High"))
  )

category_counts <- turnout_categories %>%
  group_by(category, country) %>%
  summarise(count = n(), .groups = "drop")

ggplot(category_counts, aes(x = category, y = count, fill = country)) +
  geom_col(position = "dodge") +
  scale_fill_brewer(palette = "Set2") +
  labs(
    title = "Constituencies by Turnout Category and Country",
    subtitle = "Turnout categories across UK countries",
    x = "Turnout category",
    y = "Number of constituencies",
    fill = "Country"
  ) +
  theme_minimal() +
  theme(
    plot.title = element_text(face = "bold", size = 14),
    legend.position = "bottom"
  )
```

The high turnout band is most common, followed by medium. There are clear country differences in how many low and high seats each nation has. The categories are simple but somewhat arbitrary because they use fixed cut-offs; quantile-based bands could also be used, but these still clearly show low, average, and very high turnout seats.

### High vs Low Turnout Comparison

```{r high-low-turnout}
high_turnout <- uk %>% filter(turnout_registered > 70)
low_turnout  <- uk %>% filter(turnout_registered < 60)

high_summary <- high_turnout %>%
  group_by(country) %>%
  summarise(
    n_constituencies = n(),
    mean_electorate  = mean(electorate),
    mean_turnout     = mean(turnout_registered),
    .groups = "drop"
  )

low_summary <- low_turnout %>%
  group_by(country) %>%
  summarise(
    n_constituencies = n(),
    mean_electorate  = mean(electorate),
    mean_turnout     = mean(turnout_registered),
    .groups = "drop"
  )

comparison <- bind_rows(
  high_summary %>% mutate(group = "High Turnout (>70%)"),
  low_summary  %>% mutate(group = "Low Turnout (<60%)")
) %>%
  select(group, country, n_constituencies, mean_electorate, mean_turnout)
comparison
```

High-turnout seats generally have somewhat different electorate sizes and country mix compared to low-turnout seats. Low-turnout places are often more urban and more deprived, with weaker engagement and trust. High-turnout places tend to be more politically engaged and sometimes more competitive. These structural differences help explain the turnout gap between areas.

## Conclusion

This assignment showed that UK constituencies vary considerably in size and turnout, raising questions about the equality of representation under first-past-the-post. The combination of tidyverse data wrangling and ggplot2 visualisation made it possible to move from raw parliamentary data to clear, interpretable findings in a reproducible workflow.

The source code for this site is available on [GitHub](https://github.com/bandarj300/.github.io).
